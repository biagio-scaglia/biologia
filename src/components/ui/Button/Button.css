/* ============================================
   BUTTON - Mobile First, Accessible
   ============================================ */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  padding: var(--spacing-3) var(--spacing-5);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
  text-decoration: none;
  font-family: inherit;
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  position: relative;
  overflow: hidden;
  /* Performance optimization */
  will-change: transform, background-color, box-shadow;
  /* Force hardware acceleration */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  /* Prevent text selection on click */
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
  /* Improve tap highlight on mobile */
  -webkit-tap-highlight-color: transparent;
}

.btn:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.btn:disabled,
.btn--disabled {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

/* ============================================
   VARIANTS
   ============================================ */
.btn--primary {
  background: var(--gradient-primary);
  color: var(--color-primary-foreground);
  box-shadow: var(--elevation-2), var(--glow-primary);
  position: relative;
  overflow: hidden;
}

.btn--primary::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left var(--duration-slow) var(--ease-smooth);
}

.btn--primary:hover:not(.btn--disabled) {
  background: var(--gradient-primary-hover);
  box-shadow: var(--elevation-3), var(--glow-strong);
  transform: var(--translate-hover) var(--scale-hover);
}

.btn--primary:hover:not(.btn--disabled)::before {
  left: 100%;
}

.btn--primary:active:not(.btn--disabled) {
  background: var(--gradient-primary-hover);
  transform: var(--translate-active) var(--scale-active);
  box-shadow: var(--elevation-1);
}

.btn--secondary {
  background: var(--gradient-secondary);
  color: var(--color-secondary-foreground);
  box-shadow: var(--elevation-2), var(--glow-secondary);
  position: relative;
  overflow: hidden;
}

.btn--secondary::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left var(--duration-slow) var(--ease-smooth);
}

.btn--secondary:hover:not(.btn--disabled) {
  background: var(--gradient-secondary);
  filter: brightness(1.1);
  box-shadow: var(--elevation-3), var(--glow-secondary);
  transform: var(--translate-hover) var(--scale-hover);
}

.btn--secondary:hover:not(.btn--disabled)::before {
  left: 100%;
}

.btn--secondary:active:not(.btn--disabled) {
  filter: brightness(0.95);
  transform: var(--translate-active) var(--scale-active);
  box-shadow: var(--elevation-1);
}

.btn--danger {
  background-color: var(--color-error);
  color: var(--color-error-foreground);
  box-shadow: var(--elevation-1);
}

.btn--danger:hover:not(.btn--disabled) {
  background-color: var(--color-error-hover);
  box-shadow: var(--elevation-2);
  transform: translateY(-1px);
}

.btn--danger:active:not(.btn--disabled) {
  background-color: var(--color-error-hover);
  transform: translateY(0);
}

.btn--outline {
  background-color: transparent;
  border: 2px solid;
  border-image: var(--gradient-primary) 1;
  color: var(--color-primary);
  position: relative;
  overflow: hidden;
}

.btn--outline::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 0;
  height: 100%;
  background: var(--gradient-primary);
  transition: width var(--duration-base) var(--ease-smooth);
  z-index: -1;
}

.btn--outline:hover:not(.btn--disabled) {
  background: var(--gradient-primary);
  color: var(--color-primary-foreground);
  box-shadow: var(--elevation-2), var(--glow-primary);
  transform: var(--translate-hover);
  border-color: transparent;
}

.btn--outline:hover:not(.btn--disabled)::before {
  width: 100%;
}

.btn--outline:active:not(.btn--disabled) {
  transform: var(--translate-active);
  box-shadow: var(--elevation-1);
}

.btn--ghost {
  background-color: transparent;
  color: var(--color-text);
  position: relative;
}

.btn--ghost::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: var(--gradient-subtle);
  border-radius: var(--radius-full);
  transform: translate(-50%, -50%);
  transition: width var(--duration-base) var(--ease-smooth),
              height var(--duration-base) var(--ease-smooth);
  z-index: -1;
}

.btn--ghost:hover:not(.btn--disabled) {
  background: var(--gradient-subtle);
  color: var(--color-primary);
  box-shadow: var(--shadow-xs);
  transform: var(--translate-hover);
}

.btn--ghost:hover:not(.btn--disabled)::before {
  width: 100%;
  height: 100%;
}

.btn--ghost:active:not(.btn--disabled) {
  transform: var(--translate-active);
}

/* ============================================
   SIZES
   ============================================ */
.btn--sm {
  padding: var(--spacing-2) var(--spacing-4);
  font-size: var(--font-size-sm);
  min-height: 36px;
  min-width: 36px;
}

.btn--md {
  padding: var(--spacing-3) var(--spacing-5);
  font-size: var(--font-size-base);
}

.btn--lg {
  padding: var(--spacing-4) var(--spacing-6);
  font-size: var(--font-size-lg);
  min-height: 48px;
  min-width: 48px;
}

/* ============================================
   STATES
   ============================================ */
.btn--full-width {
  width: 100%;
}

.btn--loading {
  position: relative;
  pointer-events: none;
  color: transparent;
}

.btn__spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: inline-block;
  width: 1rem;
  height: 1rem;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: var(--radius-full);
  animation: spin 0.6s linear infinite;
}

.btn__content--hidden {
  opacity: 0;
}

@keyframes spin {
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .btn {
    transition: none;
  }
  
  .btn:hover:not(.btn--disabled) {
    transform: none;
  }
  
  .btn__spinner {
    animation: none;
  }
}

